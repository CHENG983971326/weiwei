<!DOCTYPE html>
<html lang="en"  xmlns:th ="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>注册页面</title>

    <!-- CSS -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500">
    <link rel="stylesheet" th:href="@{/static/assets/bootstrap/css/bootstrap.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/static/assets/font-awesome/css/font-awesome.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/static/assets/css/form-elements.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/static/assets/css/style.css}" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js" type="text/javascript"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js" type="text/javascript"></script>
    <![endif]-->

    <!-- Favicon and touch icons -->
    <link rel="shortcut icon" th:href="@{/static/assets/ico/favicon.png}">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" th:href="@{/static/assets/ico/apple-touch-icon-144-precomposed.png}">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" th:href="@{/static/assets/ico/apple-touch-icon-114-precomposed.png}">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" th:href="@{/static/assets/ico/apple-touch-icon-72-precomposed.png}">
    <link rel="apple-touch-icon-precomposed" th:href="@{/static/assets/ico/apple-touch-icon-57-precomposed.png}">

</head>
<!--<script type="text/javascript">-->
    <!--var curIndex = 2;-->
    <!--//时间间隔(单位毫秒)，每3秒钟显示一张，数组共有3张图片放在img文件夹下-->
    <!--var timeInterval = 3000;-->
    <!--//定义一个存放照片位置的数组，可以放任意个，在这里放3个-->
    <!--var arr = new Array();-->
    <!--arr[0] = "/static/assets/img/backgrounds/1.jpg";-->
    <!--arr[1] = "/static/assets/img/backgrounds/2.jpg";-->
    <!--arr[2] = "/static/assets/img/backgrounds/3.jpg";-->
    <!--setInterval(changeImg, timeInterval);-->
    <!--function changeImg() {-->
        <!--if (curIndex == arr.length - 1) {-->
            <!--curIndex = 0;-->
        <!--} else {-->
            <!--curIndex += 1;-->
        <!--}-->

        <!--//设置body的背景图片-->
        <!--document.body.style.backgroundImage = "URL("+arr[curIndex]+")";  //显示对应的图片-->
    <!--}-->
<!--</script>-->
<body background="/static/assets/img/backgrounds/2.jpg" style="background-repeat:no-repeat">

<!-- Top content -->
<div class="top-content">

    <div class="inner-bg">
        <div class="container">
            <div class="row">
                <div class="col-sm-8 col-sm-offset-2 text">
                    <h1><strong>唯唯电商平台</strong> </h1>
                    <!--<div class="description">-->
                        <!---->
                    <!--</div>-->
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6 col-sm-offset-3 form-box">
                    <div class="form-top">
                        <div class="form-top-left">
                            <h3>Please register for our site</h3>
                            <p>Enter your username and password and so on:</p>
                            <p style="color: #de995e;" th:text="${msg}" th:if="${not #strings.isEmpty(msg)}"></p>
                        </div>
                        <div class="form-top-right">
                            <i class="fa fa-lock"></i>
                        </div>
                    </div>
                    <div class="form-bottom1">
                        <form role="form" id="sign" method="post" class="login-form">
                            <div class="form-group">
                                <label class="sr-only" for="form-username">Username</label>
                                <input type="text" name="username" placeholder="Username..." th:required="true" class="form-username form-control" id="form-username">
                            </div>
                            <div class="form-group">
                                <label class="sr-only" for="form-password">Password</label>
                                <input type="password" name="password" placeholder="Password..." th:required="true" class="form-password form-control" id="form-password">
                            </div>
                            <div class="form-group">
                                <label class="sr-only" for="form-password">RePassword</label>
                                <input type="password" name="repassword" placeholder="RePassword..." th:required="true"class="form-password form-control" id="form-passwords">
                            </div>
                            <div class="form-group">
                                <label class="sr-only" for="form-email">Email</label>
                                <input type="text" name="email"  placeholder="Email..." class="form-email form-control" th:required="true"id="form-email">
                            </div>
                            <div class="form-group">
                                <label class="sr-only" for="form-phone">Phone</label>
                                <input type="text" name="phone" placeholder="Phone..." th:required="true" class="form-phone form-control" id="form-phone">
                            </div>

                            <button type="button" onclick="register()" class="btn">Register!</button>

                        </form>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6 col-sm-offset-3 social-login">
                    <div class="social-login-buttons">
                        <a class="btn btn-link-2" href="#">
                            <i class="fa fa-facebook"></i> Facebook
                        </a>
                        <a class="btn btn-link-2" href="#">
                            <i class="fa fa-twitter"></i> Twitter
                        </a>
                        <a class="btn btn-link-2" href="#">
                            <i class="fa fa-google-plus"></i> Google Plus
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


<!-- Javascript -->
<script th:src="@{/static/assets/js/jquery-1.11.1.js}" type="text/javascript"></script>
<script th:src="@{/static/assets/bootstrap/js/bootstrap.js}" type="text/javascript"></script>
<!--<script th:src="@{/static/assets/js/jquery.backstretch.js}" type="text/javascript"></script>-->
<script th:src="@{/static/assets/js/scripts.js}" type="text/javascript"></script>

<!--[if lt IE 10]>
<script src="/static/assets/js/placeholder.js" type="text/javascript"></script>
<![endif]-->
<script>
    $(function () {
        register=function () {
            var  a=new FormData();
            var b=$("#form-username").val();
            var c=$("#form-password").val();
            var d=$("#form-passwords").val();
            var e=$("#form-email").val();
            var f=$("#form-phone").val();
            a.append("username",b);a.append("password",c);a.append("repassword",d)
            a.append("email",e);a.append("phone",f);
            if (b==null||b==""||c==null||c==""||d==null||d==""||e==null||e==""||f==null||e=="") {
                alert("参数不能为空");
                return false;
            }
            isEmail();
            // isPassword();
            $.ajax({
                url:'/user/register',
                cache : true,
                type : "POST",
                data : a, // 你的formid
                async : false,
                // 告诉jQuery不要去处理发送的数据
                processData : false,
                // 告诉jQuery不要去设置Content-Type请求头
                contentType : false,
                error : function(request) {
                    alert("Connection error");
                },
                success : function(data) {
                    if (data.code ==200) {
                        alert("注册成功");
                        window.location.href="/user/login";
                    } else if (data.code==10) {
                        alert(data.msg);
                        window.location.href="/user/registerpage";
                    }
                    else if (data.code==0) {
                        alert("注册失败");
                        window.location.href="/user/login";
                    }
                }

            })
        }
    });
    //判断输入的EMAIL格式是否正确
    function isEmail() {
        var str = $("#form-email").val().trim();
        if(str.length!=0){
           var reg=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
            if(!reg.test(str)){
                alert("对不起，您输入的邮箱格式不正确!");
                return false;
                //请将“字符串类型”要换成你要验证的那个属性名称！
            }
        }
    }
    function isPassword() {
        var str = $("#form-password").val();
        var strs=$("#form-passwords").val();
        if(str.length!=0||strs.length!=0){
            var reg=/^[a-zA-Z]\w{5,17}$/ ;
            //正确格式为：以字母开头，长度在6-18之间，只能包含字符、数字和下划线。
            if(!reg.test(str)||!reg.test(strs)){
                alert("对不起，您输入的密码不正确!");
                return false;//请将“字符串类型”要换成你要验证的那个属性名称！
            }
        }
    }
</script>
</body>

</html>